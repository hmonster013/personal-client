<div class="blog">
  <!-- Back Button -->
  <button class="blog__back-btn" (click)="goToHome()">
    <i class="fas fa-arrow-left"></i>
    Back to Home
  </button>

  <!-- Header Section -->
  <div class="blog__header">
    <h1>Welcome to My Blog</h1>
    <p>Discover insights, tutorials, and thoughts on web development, data engineering, and technology trends.</p>

    <!-- Search Bar -->
    <div class="blog__search">
      <div class="blog__search__container">
        <i class="fas fa-search blog__search__icon"></i>
        <input
          type="text"
          class="blog__search__input"
          placeholder="Search blogs by keyword..."
          [(ngModel)]="searchKeyword"
          (keydown.enter)="onSearchSubmit()"
          [value]="searchKeyword">
        <button
          class="blog__search__submit"
          (click)="onSearchSubmit()"
          [disabled]="!searchKeyword || !searchKeyword.trim()"
          title="Search blogs">
          <i class="fas fa-search"></i>
        </button>
        <button
          *ngIf="searchKeyword || selectedSkills.size > 0"
          class="blog__search__clear"
          (click)="clearAllFilters()"
          title="Clear all filters">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <!-- Search Status -->
      <div class="blog__search__status" *ngIf="isSearchMode">
        <i class="fas fa-filter"></i>
        <span>{{ getSearchStatusText() }}</span>
        <span class="blog__search__results">({{ totalRows }} results found)</span>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="blog__content">
    <!-- Blog Posts Section -->
    <div class="blog__posts">
      <div class="blog__grid">
        <div class="blog__item" *ngFor="let blog of listBlogs">
          <lib-blog-card-ui [currentBLog]="blog"></lib-blog-card-ui>
        </div>
      </div>

      <!-- Pagination -->
      <div class="blog__pagination" *ngIf="totalPages > 1">
        <button
          class="blog__pagination__btn"
          (click)="goToPage(page - 1)"
          [disabled]="page === 1"
          aria-label="Previous page">
          <i class="fas fa-chevron-left"></i>
        </button>

        <ng-container *ngFor="let tPage of listPage">
          <button
            class="blog__pagination__btn"
            [class.blog__pagination__btn--active]="page == tPage"
            (click)="goToPage(tPage)"
            [attr.aria-label]="'Go to page ' + tPage">
            {{tPage}}
          </button>
        </ng-container>

        <button
          class="blog__pagination__btn"
          (click)="goToPage(page + 1)"
          [disabled]="page === totalPages"
          aria-label="Next page">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>

      <!-- Pagination Info -->
      <div class="blog__pagination__info" *ngIf="totalRows > 0">
        Showing {{((page - 1) * size) + 1}} to {{getMinValue(page * size, totalRows)}} of {{totalRows}} posts
      </div>
    </div>

    <!-- Sidebar -->
    <aside class="blog__sidebar">
      <div class="blog__sidebar__section">
        <h3 class="blog__sidebar__title">
          Skills & Technologies
          <span class="blog__sidebar__title__badge" *ngIf="selectedSkills.size > 0">
            {{ selectedSkills.size }} selected
          </span>
        </h3>
        <div class="blog__sidebar__skills">
          <div
            class="blog__sidebar__skill-item"
            *ngFor="let skill of listSkills"
            [class.blog__sidebar__skill-item--selected]="isSkillSelected(skill)"
            (click)="onSkillClick(skill)"
            [title]="isSkillSelected(skill) ? 'Click to remove filter' : 'Click to filter by this skill'">
            <lib-skill-ui [currentSkill]="skill"></lib-skill-ui>
          </div>
        </div>

        <!-- Simple Clear All Button (only show when filters are active) -->
        <button
          class="blog__sidebar__clear-all"
          *ngIf="selectedSkills.size > 0"
          (click)="clearAllFilters()">
          <i class="fas fa-times-circle"></i>
          Clear Filters ({{ selectedSkills.size }})
        </button>
      </div>
    </aside>
  </div>
</div>
